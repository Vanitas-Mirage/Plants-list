<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Il Nostro Vivaio</title>
  <meta name="description" content="Scopri le nostre piante da vivaio: eleganza, colori e varietÃ  in un giardino digitale unico.">

  <!-- Fonts & Bootstrap -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Lato&family=Lora:wght@600&display=swap" rel="stylesheet" />
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link href="styles.css?v=3" rel="stylesheet" />
</head>
<body>
  <!-- Hero con slideshow immagini -->
  <section class="hero">
    <img id="heroImg" class="hero-slideshow active" alt="Hero"
      src="https://ik.imagekit.io/Vanitas/img/IMG_4525.JPG?updatedAt=1751002007841" />
    <div class="hero-text" onclick="scrollToPlants()">Scopri le nostre piante</div>
  </section>

  <!-- Lista piante -->
  <section class="section-wrapper"><div id="plantList"></div></section>
  <button id="backToTop" title="Torna su">&uarr;</button>

  <script async src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    /* ------ Slideshow Hero ------ */
    const slides=[
      'https://ik.imagekit.io/Vanitas/img/IMG_4525.JPG?updatedAt=1751002007841',
      'https://ik.imagekit.io/Vanitas/img/IMG_4528.JPG?updatedAt=1751002009612',
      'https://ik.imagekit.io/Vanitas/img/IMG_4527.JPG?updatedAt=1751002010078',
      'https://ik.imagekit.io/Vanitas/img/IMG_4526.JPG?updatedAt=1751002010149']
    const heroImg=document.getElementById('heroImg');
    let idx=0;
    setInterval(()=>{idx=(idx+1)%slides.length;heroImg.classList.remove('active');setTimeout(()=>{heroImg.src=slides[idx];heroImg.classList.add('active');},500);},6000);

    /* ------ Caricamento piante ------ */
    async function loadPlants(){
      const res=await fetch('https://vanitas-mirage.github.io/Plants-list/plants.json');
      const plants=await res.json();
      const c=document.getElementById('plantList');
      plants.forEach(p=>{
        const card=document.createElement('div');
        card.className='plant-card';
        card.innerHTML=`<img src="${p.img}" alt="${p.name}" loading="lazy" width="600" height="400" />
          <div class='plant-name'>${p.name}</div><div class='plant-desc'>${p.description}</div>`;
        c.appendChild(card);
      });
      const obs=new IntersectionObserver(es=>es.forEach(e=>{if(e.isIntersecting)e.target.classList.add('visible')}),{threshold:0.1});
      document.querySelectorAll('.plant-card').forEach(card=>obs.observe(card));
    }
    loadPlants();

    /* ------ Scroll helpers ------ */
    function scrollToPlants(){document.querySelector('.section-wrapper').scrollIntoView({behavior:'smooth'});}  
    const topBtn=document.getElementById('backToTop');
    window.addEventListener('scroll',()=>{topBtn.style.display=window.scrollY>300?'block':'none'});
    topBtn.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));
  </script>
</body>
</html>
